# Детектирование аномальной сетевой активности на хосте с использованием машинного обучения

## Как запустить проект

1. `git clone https://github.com/OkoksNeDam/detection-of-anomalous-network-activity.git`
2. Перейти в корень проекта
3. `docker-compose up`
4. Перейти по ссылке http://localhost:8501

## Функционал

В данном приложении есть возможность:
- загрузить обученную модель
- посмотреть список загруженных моделей
- сгенерировать отчет о найденных аномалиях

Тестовые данные для приложения можно найти по ссылке: https://drive.google.com/drive/folders/11RIvFmE7llBzCYBq_i6KuLPL8st2Mkwz?usp=sharing <br>
Модель (model_1.pickle) загружается в поле "Загрузка модели", данные с аномалиями (attack.zip)
загружаются в поле "Загрузка данных".<br>
❗❗❗ Архив attack.zip не надо распаковывать, его нужно загрузить в формате zip.<br>
Для файла attack.zip отчет формируется около 30-50 секунд.<br><br>

Внутри приложения данные преобразуются в вид двумерной матрицы.

## Сбор данных

Сбор данных осуществлялся с помощью файла flows_collector.sh. При запуске он собирал
информацию о пришедших пакетах и далее собирал их в потоки, которые в дальнейшем анализировались.
Каждому потоку соответствует свой файл расширения .pcap.<br>
Файл запускается командой `./flows_collector.sh` со следующими флагами:<br>
--i [Указанный интерфейс]<br>
--outdir [Папка для сохранения файлов]<br>
--capture_time [Время захвата трафика в секундах]<br>

С помощью данного файла собирался обычный трафик в течении 5 часов и трафик с аномалиями, о котором будет рассказано в следующем разделе.

## Генерация аномального трафика

В файле make_attack.py находится код, с помощью которого можно эмулировать SYN flood атаку. Данный файл
запускается с помощью команды `python make_attack.py`. С помощью потоков, сгенерированных файлом make_attack.py,
была протестирована модель autoencoder.

## Обучение модели

Процесс обучения модели можно найти в файле traffic_anomaly_autoencoder.ipynb.
Для выявления аномалий в потоках была использована модель автоэнкодера. В самом начале модель обучалась
на данных без аномалий (как я надеюсь). Далее, были взяты данные с syn flood атакой и прогнаны через эту модель.<br><br>
Для каждого объекта была найдена соответствующая ошибка восстановления (IRE), которая в дальнейшем сравнивалась
с максимальной IRE обучающей выборки.<br><br>
В тестовой выборке было 171 наблюдение, среди которых было 50 потоков с SYN flood атакой. Модель из 50 аномальных объектов
смогла обнаружить 45. Возможно, если добавить еще какие-нибудь признаки, то качество станет лучше. Все графики можно посмотреть
в файле traffic_anomaly_autoencoder.ipynb.